---
title: Composables
description: Documentation for shared logic and state management composables.
---

# Composables

The template includes several composables to handle shared logic across the application. These composables provide reusable functionality for platform detection, navigation, user preferences, and color management.

## `useIsMac`

**File:** `app/composables/useIsMac.ts`

A simple utility to detect if the user is on a macOS platform. Useful for showing keyboard shortcuts (e.g., Command vs. Ctrl).

### Usage

```typescript
const isMac = useIsMac();
```

### Implementation

The composable uses `navigator.platform` to detect macOS and returns a reactive ref that updates on mount:

```typescript
export function useIsMac() {
  const isMac = ref(true);
  onMounted(() => {
    isMac.value = navigator.platform.toUpperCase().includes("MAC");
  });
  return isMac;
}
```

### Example

```vue
<script setup>
const isMac = useIsMac();
</script>

<template>
  <kbd>{{ isMac ? 'âŒ˜' : 'Ctrl' }} K</kbd>
</template>
```

---

## `useNavigation`

**File:** `app/composables/useNavigation.ts`

Handles the transformation of Nuxt Content navigation data into a format suitable for the sidebar. It maps content items to their respective types (group, page, component, block).

### Usage

```typescript
const { data } = await useNavigation();
```

### Features

- Automatically transforms Nuxt Content navigation structure
- Categorizes items by type: `page`, `component`, `block`, or `group`
- Filters and organizes content hierarchy
- Works with the content directory structure

### Return Value

Returns an object with:
- `data`: A reactive ref containing the transformed navigation structure

### Implementation Details

The composable:
1. Queries the content collection navigation
2. Finds the "docs" section
3. Filters items that have children (non-root docs)
4. Maps each item with its type based on parent context
5. Returns a structured navigation tree

---

## `useConfig` (User Configuration)

**File:** `app/composables/useUserConfig.ts`

Manages user-specific configurations that are persisted using cookies. This composable uses `createSharedComposable` to ensure state is shared across components.

### Usage

```typescript
const { config, isLayoutFull } = useConfig();
```

### Configuration Options

The composable manages three user preferences:

- **Layout**: Switch between `"fixed"` and `"full"` width
- **Package Manager**: Remembers the user's preference (`"pnpm"`, `"npm"`, `"yarn"`, or `"bun"`)
- **Installation Type**: CLI or Manual (`"cli"` or `"manual"`)

### Default Values

```typescript
{
  layout: "fixed",
  packageManager: "pnpm",
  installationType: "cli",
}
```

### Return Value

Returns an object with:
- `config`: A reactive cookie ref containing the user configuration
- `isLayoutFull`: A computed boolean indicating if the layout is set to "full"

### Automatic Layout Class Application

The composable automatically applies layout classes to the document element:

- When `layout` is `"fixed"`, adds `layout-fixed` class
- When `layout` is `"full"`, adds `layout-full` class
- Removes previous layout classes when switching

### Example

```vue
<script setup>
const { config, isLayoutFull } = useConfig();

function switchLayout() {
  config.value.layout = isLayoutFull.value ? "fixed" : "full";
}
</script>

<template>
  <div :class="{ 'max-w-7xl': !isLayoutFull, 'w-full': isLayoutFull }">
    <!-- Content -->
  </div>
</template>
```

---

## `useColor`

**File:** `app/composables/useColor.ts`

Manages color format preferences and tracks the last copied color value. Useful for color picker components and documentation that displays color values.

### Usage

```typescript
const { format, lastCopied, setFormat, setLastCopied, isLoading } = useColors();
```

### Configuration

The composable stores:
- **format**: The color format preference (`"hsl"`, `"rgb"`, `"hex"`, or `"oklch"`)
- **lastCopied**: The last color value that was copied to clipboard

### Default Values

```typescript
{
  format: "hsl",
  lastCopied: "",
}
```

### Return Value

Returns an object with:
- `isLoading`: A computed boolean indicating if the component is mounted (prevents hydration issues)
- `format`: A computed ref of the current color format
- `lastCopied`: A computed ref of the last copied color
- `setFormat(format)`: Function to update the color format
- `setLastCopied(color)`: Function to update the last copied color

### Example

```vue
<script setup>
const { format, setFormat, setLastCopied } = useColors();

function copyColor(color: string) {
  navigator.clipboard.writeText(color);
  setLastCopied(color);
}

function toggleFormat() {
  const formats = ["hsl", "rgb", "hex", "oklch"];
  const currentIndex = formats.indexOf(format.value);
  const nextIndex = (currentIndex + 1) % formats.length;
  setFormat(formats[nextIndex]);
}
</script>

<template>
  <div>
    <button @click="toggleFormat">Format: {{ format }}</button>
    <button @click="copyColor('#3b82f6')">Copy Blue</button>
  </div>
</template>
```

---

## Best Practices

1. **Use `createSharedComposable`** for composables that manage global state (like `useConfig`)
2. **Handle client-side only logic** with `isClient` checks or `useMounted` from VueUse
3. **Use cookies for persistence** when you need to maintain state across page reloads
4. **Return computed values** for derived state to ensure reactivity
5. **Type your composables** with TypeScript for better developer experience
